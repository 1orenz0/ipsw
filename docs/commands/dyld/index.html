<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>dyld - ipsw</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://blacktop.github.io/ipsw/favicon.png">

  
  
  <link rel="stylesheet" href="/ipsw/css/style.min.283317b3b68727e38f0757ac07557dbd3980c78e15c2427b949d84af9955e8cd.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/ipsw/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/ipsw/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-github">
      <a href="https://github.com/blacktop/ipsw">
        <span>Github</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://blacktop.github.io/ipsw/"><img alt="Logo" src="/ipsw/images/ipsw.png" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://blacktop.github.io/ipsw/"><img alt="Logo" src="/ipsw/images/ipsw.png" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/ipsw/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/ipsw/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-github">
      <a href="https://github.com/blacktop/ipsw">
        <span>Github</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Docs</h4>
  <ul>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/install/">Install</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/build/">Build</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/getting-started/">Getting Started</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/download/">download</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/info/">info</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/extract/">extract</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/macho/">macho</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/kernel/">kernel</a>
    </li>
    
    <li class="active ">
      <a href="https://blacktop.github.io/ipsw/docs/commands/dyld/">dyld</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/device-tree/">dtree</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/disassemble/">disass</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/device-list/">device-list</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/ota/">ota</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/shsh/">shsh</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/img4/">img4</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/iboot/">iboot</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/commands/completion/">completion</a>
    </li>
    
    <li class="">
      <a href="https://blacktop.github.io/ipsw/docs/roadmap/">Roadmap</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">dyld</h1>
<div class="content ">
  <ul>
<li><a href="#dyld"><strong>dyld</strong></a></li>
<li><a href="#dyld-extract"><strong>dyld extract</strong></a></li>
<li><a href="#dyld-symaddr"><strong>dyld symaddr</strong></a></li>
<li><a href="#dyld-a2s"><strong>dyld a2s</strong></a></li>
<li><a href="#dyld-sel"><strong>dyld sel</strong></a></li>
<li><a href="#dyld-split"><strong>dyld split</strong></a></li>
<li><a href="#dyld-webkit"><strong>dyld webkit</strong></a></li>
<li><a href="#dyld-patches-"><strong>dyld patches</strong> ðŸ†•</a></li>
<li><a href="#dyld-a2o"><strong>dyld a2o</strong></a></li>
<li><a href="#dyld-o2a"><strong>dyld o2a</strong></a></li>
</ul>
<hr>
<h3 id="dyld"><strong>dyld</strong></h3>
<p>Similar to <code>otool -h -L dyld_shared_cache</code></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld -L dyld_shared_cache <span class="p">|</span> head -n35

<span class="nv">Header</span>
<span class="o">======</span>
<span class="nv">Magic</span>            <span class="o">=</span> <span class="s2">&#34;dyld_v1  arm64e&#34;</span>
<span class="nv">UUID</span>             <span class="o">=</span> 92537455-A74B-3198-96CD-F2D2D2778315
<span class="nv">Platform</span>         <span class="o">=</span> iOS
<span class="nv">Format</span>           <span class="o">=</span> <span class="m">10</span> <span class="o">(</span>BuiltFromChainedFixups<span class="o">)</span>
Max <span class="nv">Slide</span>        <span class="o">=</span> 0x33940000 <span class="o">(</span>ASLR entropy: 16-bits<span class="o">)</span>

Local Symbols <span class="o">(</span>nlist array<span class="o">)</span>:     78MB,  offset:  0x62144260 -&gt; 0x66F98340
Local Symbols <span class="o">(</span>string pool<span class="o">)</span>:    256MB,  offset:  0x66F98340 -&gt; 0x7701333B
Code Signature:                   3MB,  offset:  0x77014000 -&gt; 0x773D0000
ImagesText Info <span class="o">(</span><span class="m">2072</span> entries<span class="o">)</span>:  64KB,  offset:  0x00000300 -&gt; 0x00010600
Slide Info <span class="o">(</span>v3<span class="o">)</span>:                  0KB,  offset:  0x00000000 -&gt; 0x00000000
Branch Pool:                      0MB,  offset:  0x00000000 -&gt; 0x00000000
Accelerate Tab:                   0KB,  address: 0x00000000 -&gt; 0x00000000
Patch Info:                     512KB,  address: 0x1E798654C -&gt; 0x1E7A068BC
Closures:                         6MB,  address: 0x1E7AE0000 -&gt; 0x1E8129748
Closures Trie:                   53KB,  address: 0x1E8129748 -&gt; 0x1E8136D40
Shared Region:                    4GB,  address: 0x180000000 -&gt; 0x280000000

<span class="nv">Mappings</span>
<span class="o">========</span>
<span class="p">|</span>    SEG     <span class="p">|</span> INITPROT <span class="p">|</span> MAXPROT <span class="p">|</span>  SIZE   <span class="p">|</span>        ADDRESS         <span class="p">|</span>     FILE OFFSET      <span class="p">|</span>  SLIDE INFO OFFSET   <span class="p">|</span> FLAGS <span class="p">|</span>
<span class="p">|</span>------------<span class="p">|</span>----------<span class="p">|</span>---------<span class="p">|</span>---------<span class="p">|</span>------------------------<span class="p">|</span>----------------------<span class="p">|</span>----------------------<span class="p">|</span>-------<span class="p">|</span>
<span class="p">|</span> __TEXT     <span class="p">|</span> r-x      <span class="p">|</span> r-x     <span class="p">|</span> <span class="m">1222</span> MB <span class="p">|</span> <span class="m">180000000</span> -&gt; 1CC6C0000 <span class="p">|</span> <span class="m">00000000</span> -&gt; 4C6C0000 <span class="p">|</span> <span class="m">00000000</span> -&gt; <span class="m">00000000</span> <span class="p">|</span> <span class="m">0</span>     <span class="p">|</span>
<span class="p">|</span> __DATA     <span class="p">|</span> rw-      <span class="p">|</span> rw-     <span class="p">|</span> <span class="m">116</span> MB  <span class="p">|</span> 1CE6C0000 -&gt; 1D5B18000 <span class="p">|</span> 4C6C0000 -&gt; 53B18000 <span class="p">|</span> 58CA4000 -&gt; 58CB4000 <span class="p">|</span> <span class="m">0</span>     <span class="p">|</span>
<span class="p">|</span> __AUTH     <span class="p">|</span> rw-      <span class="p">|</span> rw-     <span class="p">|</span> <span class="m">81</span> MB   <span class="p">|</span> 1D7B18000 -&gt; 1DCCA4000 <span class="p">|</span> 53B18000 -&gt; 58CA4000 <span class="p">|</span> 58CB8000 -&gt; 58CC4000 <span class="p">|</span> <span class="m">1</span>     <span class="p">|</span>
<span class="p">|</span> __LINKEDIT <span class="p">|</span> r--      <span class="p">|</span> r--     <span class="p">|</span> <span class="m">148</span> MB  <span class="p">|</span> 1DECA4000 -&gt; 1E8138000 <span class="p">|</span> 58CA4000 -&gt; <span class="m">62138000</span> <span class="p">|</span> <span class="m">00000000</span> -&gt; <span class="m">00000000</span> <span class="p">|</span> <span class="m">0</span>     <span class="p">|</span>

<span class="nv">Images</span>
<span class="o">======</span>
   1: 0x180045000 /usr/lib/system/libsystem_trace.dylib                                                           <span class="o">(</span>1264.0.0<span class="o">)</span>
   2: 0x18005C000 /usr/lib/system/libxpc.dylib                                                                    <span class="o">(</span>2001.0.0<span class="o">)</span>
   3: 0x180091000 /usr/lib/system/libsystem_blocks.dylib                                                          <span class="o">(</span>76.0.0<span class="o">)</span>
   4: 0x180093000 /usr/lib/system/libsystem_c.dylib                                                               <span class="o">(</span>1431.0.0<span class="o">)</span>
</code></pre></div><h3 id="dyld-extract"><strong>dyld extract</strong></h3>
<p>Extract <em>dyld_shared_cache</em> from a previously downloaded <em>ipsw</em></p>
<ul>
<li><code>macOS</code></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld extract iPhone11,2_12.0_16A366_Restore.ipsw
   â€¢ Extracting dyld_shared_cache from IPSW
   â€¢ Mounting DMG
   â€¢ Extracting System/Library/Caches/com.apple.dyld/dyld_shared_cache_arm64e to dyld_shared_cache
   â€¢ Unmounting DMG
</code></pre></div><ul>
<li><code>docker</code></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ docker run --init -it --rm <span class="se">\
</span><span class="se"></span>             --device /dev/fuse <span class="se">\
</span><span class="se"></span>             --cap-add<span class="o">=</span>SYS_ADMIN <span class="se">\
</span><span class="se"></span>             -v <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span> :/data <span class="se">\
</span><span class="se"></span>             blacktop/ipsw -V dyld extract iPhone11_2_12.4.1_16G102_Restore.ipsw
</code></pre></div><h3 id="dyld-symaddr"><strong>dyld symaddr</strong></h3>
<p>Find all instances of a symbol&rsquo;s <em>(unslid)</em> addresses in shared cache</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld symaddr dyld_shared_cache &lt;SYMBOL_NAME&gt;
</code></pre></div><p>Speed it up by supplying the dylib name</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld symaddr --image JavaScriptCore dyld_shared_cache &lt;SYMBOL_NAME&gt;
</code></pre></div><p><strong>NOTE:</strong> you don&rsquo;t have to supply the full image path</p>
<p>Dump ALL teh symbolz!!!</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld symaddr dyld_shared_cache
</code></pre></div><h3 id="dyld-a2s"><strong>dyld a2s</strong></h3>
<p>Lookup what symbol is at a given <em>unslid</em> address <em>(in hex)</em></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld a2s dyld_shared_cache 0x190a7221c
   â€¢ parsing public symbols...
   â€¢ parsing private symbols...
0x190a7221c: _xmlCtxtGetLastError
</code></pre></div><p>This will also create a cached version of the lookup hash table so the next time you lookup it will be much faster</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">time</span> dist/ipsw_darwin_amd64/ipsw dyld a2s dyld_shared_cache 0x190a7221c
   â€¢ parsing public symbols...
   â€¢ parsing private symbols...
0x190a7221c: _xmlCtxtGetLastError
61.59s user 9.80s system 233% cpu <span class="s2">&#34;30.545 total&#34;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">time</span> ipsw dyld a2s dyld_shared_cache 0x190a7221c
0x190a7221c: _xmlCtxtGetLastError
2.12s user 0.51s system 109% cpu <span class="s2">&#34;2.407 total&#34;</span>
</code></pre></div><h3 id="dyld-sel"><strong>dyld sel</strong></h3>
<p>Get ObjC selector <em>(unslid)</em> address</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld sel dyld_shared_cache release

0x1b92c85a8: release
</code></pre></div><p>Or get all the selectors for an image</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld sel --image CoreFoundation dyld_shared_cache

Objective-C Selectors:
/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
    0x1b92c88c8: exceptionWithName:reason:userInfo:
    0x1b92c878d: mutableCopyWithZone:
    0x1b92c877f: copyWithZone:
    0x1b92c88eb: initWithSet:copyItems:
    0x1b92c8820: doesNotRecognizeSelector:
    0x1b92c8902: initWithObjects:count:
    0x1b92c8919: initWithCapacity:
    0x1b92c8418: dealloc
&lt;SNIP&gt;
</code></pre></div><p>Get all teh selectors!!</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld sel dyld_shared_cache
</code></pre></div><p><strong>NOTE:</strong> This doesn&rsquo;t include <code>headers</code>, <code>class names</code> or <code>protocols</code> yet.</p>
<h3 id="dyld-split"><strong>dyld split</strong></h3>
<p><em>(only on macOS)</em></p>
<p>Split up a <em>dyld_shared_cache</em></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld split dyld_shared_cache .
   â€¢ Splitting dyld_shared_cache

0/1445
1/1445
2/1445
3/1445
&lt;SNIP&gt;
1441/1445
1442/1445
1443/1445
1444/1445
</code></pre></div><h3 id="dyld-webkit"><strong>dyld webkit</strong></h3>
<p>Extract WebKit version from <em>dyld_shared_cache</em></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld webkit --rev dyld_shared_cache
   â€¢ WebKit Version: 609.1.17.0.1 <span class="o">(</span>svn rev 256416<span class="o">)</span>
</code></pre></div><h3 id="dyld-patches-"><strong>dyld patches</strong> ðŸ†•</h3>
<p>List dyld patch info</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld patches dyld_shared_cache <span class="p">|</span> grep entries
   â€¢ <span class="o">[</span><span class="m">68</span> entries<span class="o">]</span> /usr/lib/system/libsystem_c.dylib
   â€¢ <span class="o">[</span><span class="m">243</span> entries<span class="o">]</span> /usr/lib/system/libdispatch.dylib
   â€¢ <span class="o">[</span><span class="m">13</span> entries<span class="o">]</span> /usr/lib/system/libsystem_malloc.dylib
   â€¢ <span class="o">[</span><span class="m">3</span> entries<span class="o">]</span> /usr/lib/system/libsystem_platform.dylib
   â€¢ <span class="o">[</span><span class="m">8</span> entries<span class="o">]</span> /usr/lib/system/libsystem_pthread.dylib
   â€¢ <span class="o">[</span><span class="m">6</span> entries<span class="o">]</span> /usr/lib/libobjc.A.dylib
   â€¢ <span class="o">[</span><span class="m">23</span> entries<span class="o">]</span> /usr/lib/libc++abi.dylib
   â€¢ <span class="o">[</span><span class="m">45</span> entries<span class="o">]</span> /usr/lib/system/libsystem_kernel.dylib
   â€¢ <span class="o">[</span><span class="m">2</span> entries<span class="o">]</span> /usr/lib/system/libdyld.dylib
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld patches dyld_shared_cache -i libdyld.dylib
0x0028074C <span class="o">(</span><span class="m">63</span> patches<span class="o">)</span>  _dlclose
0x00280820 <span class="o">(</span><span class="m">399</span> patches<span class="o">)</span> _dlopen
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ipsw dyld patches dyld_shared_cache -i libdyld.dylib -s _dlopen <span class="p">|</span> head
   â€¢ _dlopen patch locations
offset: 0x57b18898, addend: 0, diversity: 0x0000, key: IA, auth: <span class="nb">true</span>
offset: 0x57b19170, addend: 0, diversity: 0x0000, key: IA, auth: <span class="nb">true</span>
offset: 0x57b1ec20, addend: 0, diversity: 0x0000, key: IA, auth: <span class="nb">true</span>
offset: 0x57b345f8, addend: 0, diversity: 0x0000, key: IA, auth: <span class="nb">true</span>
offset: 0x57b38a50, addend: 0, diversity: 0x0000, key: IA, auth: <span class="nb">true</span>
offset: 0x57b3cd08, addend: 0, diversity: 0x0000, key: IA, auth: <span class="nb">true</span>
offset: 0x57b3db98, addend: 0, diversity: 0x0000, key: IA, auth: <span class="nb">true</span>
offset: 0x57b79850, addend: 0, diversity: 0x0000, key: IA, auth: <span class="nb">true</span>
offset: 0x57b88138, addend: 0, diversity: 0x0000, key: IA, auth: <span class="nb">true</span>
offset: 0x57bb56a8, addend: 0, diversity: 0x0000, key: IA, auth: <span class="nb">true</span>
</code></pre></div><h3 id="dyld-a2o"><strong>dyld a2o</strong></h3>
<p>Convert <em>dyld_shared_cache</em> address to offset</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">ipsw dyld a2o dyld_shared_cache 1D7B18000

0x053b18000
</code></pre></div><h3 id="dyld-o2a"><strong>dyld o2a</strong></h3>
<p>Convert <em>dyld_shared_cache</em> offset to address</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">ipsw dyld a2o dyld_shared_cache 0x4C6C0000

0x1ce6c0000
</code></pre></div>
</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/ipsw/js/scripts.min.1237ff71925bb8625c97a9af8db4c54525258bedfd7c47493daaff723bea755e.js"></script>
  

  
  
  
    
  


</body>

</html>
